package cwst.com.services;

import java.math.BigDecimal;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;

import cwst.com.TimeConverter;
import cwst.com.entities.CwstSentmail;
import cwst.com.entities.CwstSentmailPK;
import cwst.com.repositories.CwstSentmailRepo;

@Service
public class CwstSentmailServiceImpl implements CwstSentmailService {

	@Autowired
	private CwstSentmailRepo cwstSentmailRepo;
	private final TimeConverter timeConverter = new TimeConverter();

	@Override
	public void save(final String caseid, final String caseresult, final String mailcontent) {
		final CwstSentmail cwstSentmail = new CwstSentmail();
		final CwstSentmailPK id = new CwstSentmailPK();
		id.setCaseId(caseid);
		id.setMailtype(caseresult);
		cwstSentmail.setMailcontent(mailcontent);

		cwstSentmail.setId(id);
		cwstSentmail.setCreTms(new BigDecimal(timeConverter.getCurrentTime("FULL")));
		cwstSentmailRepo.save(cwstSentmail);

	}

}
